---
title: "ST558 - Project 2 - Shiny App - Kyra Kapsaskis"
author: "Kyra Kapsaskis"
format: html
editor: visual
---

```{r}
library(httr)
library(jsonlite)
library(tidyr)
library(shinydashboard)
library(DT)
library(shiny)
library(caret)
library(dplyr)
library(ggplot2)
```

```{r}
URL_base <- "https://api.sunrise-sunset.org/json"
```

```{r}
URL_example <- "https://api.sunrise-sunset.org/json?lat=36.7201600&lng=-4.4203400"
```

```{r}
example_info <- GET(URL_example)
str(example_info, max.level = 1)
```

```{r}
parsed <- fromJSON(rawToChar(example_info$content)) 
ex_info <- as_tibble(parsed$results) 
ex_info
```


```{r}

# Example function

get_sunrise_sunset <- function(latitude, longitude, date){
  URL <- paste("https://api.sunrise-sunset.org/json",
    "?lat=",
    # in decimal degrees
    latitude,
    "&lng=",
    # in decimal degrees
    longitude,
    "&date=",
    # Date in YYYY-MM-DD format
    date,
    sep = "")
  myData <- GET(URL)
  parsed <- myData$content |>
    rawToChar() |>
    fromJSON()
  str(parsed, max.level = 1)
  parsed$results |>
  as_tibble()
}
```

```{r}
URL
```


```{r}
get_sunrise_sunset(35.913200, -79.055847, 2024-07-07)
```

